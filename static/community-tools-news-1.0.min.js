console.log("Welcome to Yaxham!"),window.yaxham=window.yaxham||{},window.yaxham.modules=window.yaxham.modules||{},function(){yaxham.modules.News=function(e){var t=new yaxham.modules.NewsModel,n=new yaxham.modules.NewsView(e,t),r=new yaxham.modules.NewsController(n,t);return r}}(),function(){function e(e,t){this.intervals=[],this.view=e,this.model=t}e.prototype.initialise=function(){this.load(),this.view.updateAll()},e.prototype.load=function(){var t={url:e.URL,dataType:"jsonp"},n=jQuery.ajax(t);n.then(this.handleLoad.bind(this))},e.prototype.handleLoad=function(e){this.model.setAllData(e),this.view.updateAll()},e.prototype.destroy=function(){this.intervals.forEach(function(e){window.clearInterval(e)}),this.view.destroy()},e.URL="http://community-tools.appspot.com/news",yaxham.modules.NewsController=e}(),function(){function e(){this.data=null}e.prototype.data=null,e.prototype.hasData=function(){return!!this.data},e.prototype.setAllData=function(e){this.data=e},e.prototype.getData=function(e){var t="ddd HH:mm";return this.data.filter(function(n,r){return r<e}).map(function(e){return{title:e.title,pubDate:e.pubDate,date:moment(e.pubDate).format(t),description:e.description,link:e.link}})},yaxham.modules.NewsModel=e}(),function(){function e(e,t){this.jElement=jQuery(e);if(this.jElement.length==0)throw new Error("Invalid selector: "+e);this.model=t,this.itemCount=4}e.prototype.jElement=null,e.prototype.showAll=null,e.prototype.updateAll=function(){this.model.hasData()?this.displayBoard():this.displayLoading()},e.prototype.displayLoading=function(){this.jElement.addClass("loading")},e.prototype.displayBoard=function(){this.jElement.removeClass("loading");var t=this.model.getData(this.itemCount);this.jElement.html(Mustache.to_html(e.NEWS_LIST,{items:t})),this.itemCount<this.model.data.length&&this.jElement.find(".showMore").removeClass("hidden").click(this.handleShowAllClicked.bind(this))},e.prototype.handleShowAllClicked=function(){this.itemCount+=5,this.updateAll()},e.NEWS_LIST='<ul>{{#items}}<li class="{{className}}"><h3><a target="_BLANK" href="{{link}}">{{title}}</a></h3><div>{{{description}}}</div><time datetime="{{pubDate}}">{{date}}</time></li>{{/items}}</ul><div class="showMore hidden button">More News..</div>',yaxham.modules.NewsView=e}();